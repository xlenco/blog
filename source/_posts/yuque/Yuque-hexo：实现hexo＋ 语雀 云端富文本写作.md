---
title: Yuque-hexoï¼šå®ç°hexoï¼‹ è¯­é›€ äº‘ç«¯å¯Œæ–‡æœ¬å†™ä½œ
categories:
  - [æ•™ç¨‹]
  - [è½¬è½½]

tags:
  - Hexo

cover: https://xlenco.onmicrosoft.cn/img/8840187_u6Y8xVR1j.jpg?ik-sdk-version=javascript-1.4.3&updatedAt=1661609019485
updated: 2022-10-24 10:29
date: 2022-9-9 22:01
---

## å‰è¨€

æœ¬æ–‡è½¬è½½è‡ªå†°è€å¸ˆçš„[æ•™ç¨‹ï¼šhexoÃ— è¯­é›€ å®ç°äº‘ç«¯å¯Œæ–‡æœ¬å†™ä½œ](https://zfe.space/post/554e.html)ï¼Œå¯¹å…¶æœ‰æ‰€ä¿®æ”¹å’Œè¡¥å……ã€‚

## ä»€ä¹ˆæ˜¯è¯­é›€ï¼Ÿ

> ã€Œè¯­é›€ã€æ˜¯ä¸€ä¸ªã€Œä¸“ä¸šçš„äº‘ç«¯çŸ¥è¯†åº“ã€ï¼Œå­µåŒ–è‡ª [èš‚èšé‡‘æœ](https://www.antfin.com/?deer_tracert_token=cc478126-c93a-459b-a448-dd41de67f2d4) ï¼Œæ˜¯ [ä½“éªŒç§‘æŠ€](https://www.yuque.com/yubo/explore/tcaywl?deer_tracert_token=cc478126-c93a-459b-a448-dd41de67f2d4) ç†å¿µä¸‹çš„ä¸€æ¬¾åˆ›æ–°äº§å“ï¼Œå·²æ˜¯ 10 ä¸‡é˜¿é‡Œå‘˜å·¥è¿›è¡Œæ–‡æ¡£ç¼–å†™ã€çŸ¥è¯†æ²‰æ·€çš„æ ‡é…ã€‚
> è¯­é›€è¯ç”Ÿä¼Šå§‹ï¼Œåªæ˜¯å¸Œæœ›èƒ½ç»™å·¥ç¨‹å¸ˆæä¾›ä¸€ä¸ªå¥½ç”¨çš„å·¥å…·ç”¨æ¥å†™æŠ€æœ¯æ–‡æ¡£ï¼Œè¾¾æˆã€Œç”¨ Markdown å†™æ–‡æ¡£ã€è¿™ä¸ªå°ç›®æ ‡ã€‚ä½†åœ¨äº§å“ç ”å‘çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å‘ç°å…¶å®èº«è¾¹çš„æ¯ä¸ªäººã€æ¯ä¸ªå›¢é˜Ÿã€æ¯ä¸ªç»„ç»‡éƒ½æœ‰å¾ˆå¤šçŸ¥è¯†ï¼Œä½†ä¸€ç›´ä»¥æ¥ç¼ºå°‘ä¸€ä¸ªå¥½ç”¨çš„å·¥å…·è®©è¿™äº›çŸ¥è¯†ä¸åªæ˜¯ç•™åœ¨æ¯ä¸ªäººçš„å¤§è„‘æˆ–ç”µè„‘é‡Œï¼Œè¿˜å¯ä»¥è¢«è®°å½•ã€åˆ†äº«å’Œäº¤æµã€‚
> æ‰€ä»¥ï¼Œå¸¦ç€è¿™é¢—åˆå¿ƒï¼Œæˆ‘ä»¬è§‰å¾—è¯­é›€ä¸åº”æ­¢æ­¥äºæœåŠ¡å·¥ç¨‹å¸ˆï¼Œåº”è¯¥è‡´åŠ›äºä¸ºæ¯ä¸ªæƒ³è¡¨è¾¾æ‰€æ€æ‰€æƒ³çš„äººæä¾›ä¸€æ¬¾é¡ºæ‰‹çš„å·¥å…·ï¼Œè®©çŸ¥è¯†èƒ½å¾—ä»¥è®°å½•å’Œä¼ æ’­ï¼Œè®©äººä»¬å¯ä»¥åœ¨ã€Œè¯­é›€ã€ä¸­å¹³ç­‰å¿«ä¹åœ°åˆ›ä½œå’Œäº¤æµçŸ¥è¯†ï¼Œè®©å†å°çš„ä¸ªä½“ä¹Ÿå¯ä»¥æ‹¥æœ‰è‡ªå·±çš„çŸ¥è¯†åº“ã€‚

## ä½¿ç”¨ hexoÃ— è¯­é›€çš„åˆè¡·ï¼Ÿ

é€šè¿‡æœ¬æ•™ç¨‹ï¼Œä½ å¯ä»¥å°†ä½ çš„æ–‡ç« å‚¨å­˜åœ¨äº‘ç«¯ï¼Œå®ç°äº‘ç«¯å†™ä½œï¼ˆä¸é™äº MAC ç³»ç»Ÿã€Windows ç³»ç»Ÿï¼‰ï¼Œæ‘†è„±æœ¬åœ°æœºå™¨çš„é™åˆ¶ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œä¼˜ç§€ç®€çº¦çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨èƒ½æå¤§æå‡ä½ çš„å†™ä½œæ•ˆç‡ï¼Œä½¿ä½ èƒ½æ›´ä¸“æ³¨äºæ–‡æœ¬çš„å†™ä½œã€‚é€šè¿‡ç»“åˆ github actionï¼ˆgithub è‡ªåŠ¨éƒ¨ç½²ï¼‰ã€serverless äº‘å‡½æ•°ï¼ˆè…¾è®¯äº‘ APIï¼Œç”¨äºéƒ¨ç½²äº‹ä»¶çš„è§¦å‘ï¼‰ã€è¯­é›€ï¼ˆæ–‡æ¡£çš„å‘å¸ƒï¼‰ã€Hexoï¼ˆåšå®¢ç³»ç»Ÿï¼‰è‡ªåŠ¨å®ç°æ–‡ç« å‘å¸ƒåˆ°åšå®¢å±•ç°çš„æµç¨‹ã€‚

## ä½¿ç”¨å‰çš„å‡†å¤‡ï¼Ÿ

ä¸ºäº†æ›´å¥½ã€æ›´æ–¹ä¾¿çš„å®Œæˆ hexoÃ— è¯­é›€çš„éƒ¨ç½²ã€‚åœ¨å¼€å§‹æµç¨‹æ­å»ºçš„æ“ä½œå‰ï¼Œä½ éœ€è¦å®Œæˆä»¥ä¸‹æ­¥éª¤ã€‚

### è´¦å·çš„ç”³è¯·ä¸æˆæƒ

- è¯­é›€è´¦å·[ç”³è¯·](https://www.yuque.com/login)
- Hexo æºç åœ¨ Github ä¸Šï¼Œå¦åˆ™æ— æ³•è¿›è¡Œè‡ªåŠ¨éƒ¨ç½²
- Vercel è´¦å·ä¸€æšï¼Œå¹¶æˆåŠŸç»‘å®šåŸŸå
- è·å– github ç§é’¥ï¼Œå‰å¾€ [github çš„ token è®¾ç½®](https://github.com/settings/tokens)ï¼ˆ Â [https://github.com/settings/tokens](https://github.com/settings/tokens)ï¼‰ï¼Œç‚¹å‡»ç”Ÿæˆå¯†é’¥æŒ‰é’®ï¼Œå¡«å†™å¯†é’¥åç§°ï¼Œå‹¾é€‰ repo é€‰é¡¹ã€‚å°†ç”Ÿæˆçš„å¯†é’¥ä¿å­˜åœ¨æ¡Œé¢æ–°å»ºçš„ txt æ–‡ä»¶é‡Œå¤‡ç”¨ã€‚

### ä»“åº“çš„å‡†å¤‡

å¦‚æœä½ å·²ç»é…ç½®äº† github action ä½ å¯ä»¥å¿½ç•¥è¿™ä¸€æ­¥ã€‚
ä¸ºäº†å®ç° hexo çš„è‡ªåŠ¨éƒ¨ç½²ï¼Œéœ€è¦å°†æœ¬åœ°çš„æºç æ–‡ä»¶äº¤ä¸ github æ‰˜ç®¡ï¼Œä½ å¯ä»¥åˆ›å»ºç§æœ‰ä»“åº“ï¼ˆå»ºè®®ï¼‰ä¹Ÿå¯ä»¥åˆ›å»ºå…±æœ‰ä»“åº“ã€‚

## æ­¥éª¤ä¸€ï¼šhexo åšå®¢æ–‡ç« çš„è¿ç§»

### ä»“åº“çš„åˆ›å»º

ç™»é™†[è¯­é›€](https://www.yuque.com/)ï¼Œç‚¹å‡»çŸ¥è¯†åº“ ğŸ‘‰ æ–°å»ºçŸ¥è¯†åº“ã€‚å°†çŸ¥è¯†åº“çš„å¯è§èŒƒå›´æ”¹ä¸º â€œäº’è”ç½‘å¯è§â€ã€‚

![image.png](https://cdn.nlark.com/yuque/0/2020/png/8391485/1608131882653-69d7b88a-caa9-45ff-a7ca-419647791d22.png#align=left&display=inline&height=789&margin=%5Bobject%20Object%5D&name=image.png&originHeight=789&originWidth=1279&size=102336&status=done&style=none&width=1279#crop=0&crop=0&crop=1&crop=1&id=kIrdR&originHeight=789&originWidth=1279&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

### æ–‡ç« çš„å¯¼å…¥

ç‚¹å‡»çŸ¥è¯†åº“çš„ç®¡ç†æŒ‰é’®ï¼Œé€‰æ‹©æ–°å»ºä¸‹çš„å¯¼å…¥ï¼Œå°†åšå®¢ä¸­\_post æ–‡ç« è¿›è¡Œæ‰¹é‡å¯¼å…¥ã€‚

![image.png](https://cdn.nlark.com/yuque/0/2020/png/8391485/1608132157680-32f96698-74a3-45b3-81e6-215ba0115fab.png#align=left&display=inline&height=789&margin=%5Bobject%20Object%5D&name=image.png&originHeight=789&originWidth=1279&size=155092&status=done&style=none&width=1279#crop=0&crop=0&crop=1&crop=1&id=qvSXv&originHeight=789&originWidth=1279&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

### æ¨¡æ¿çš„åˆ›å»º

ä¸ºäº†æ–¹ä¾¿ä»¥åæ–‡æ¡£çš„æ’°å†™ï¼Œå¯ä»¥æ–°å»ºæ¨¡æ¿ã€‚æ³¨æ„å›¾ç‰‡é“¾æ¥éœ€è¦åŠ ä¸Šâ€™â€™é˜²æ­¢è¢«æ¸²æŸ“æˆé“¾æ¥ã€‚

![image.png](https://cdn.nlark.com/yuque/0/2020/png/8391485/1608132265373-09c816b7-bbf8-4a6f-9ea0-012060269c8b.png#align=left&display=inline&height=789&margin=%5Bobject%20Object%5D&name=image.png&originHeight=789&originWidth=1279&size=127438&status=done&style=none&width=1279#crop=0&crop=0&crop=1&crop=1&id=u5cu0&originHeight=789&originWidth=1279&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

å¦‚æœä½ ä½¿ç”¨äº† abbrlinkï¼Œè¯·æ‰‹åŠ¨å¡«å†™ abbrlinkã€‚

```markdown
---
title:
author:
tags:
categories:
cover:
top_img:
abbrlink:
date:
---
```

å»ºè®®åœ¨è¯­é›€ä¸­æ–°å»ºä¸ªæ¨¡æ¿ï¼Œå‘ä»¥ä¸Šå†…å®¹å¤åˆ¶å¹¶ä¿å­˜ï¼Œä»¥åå†™æ–‡ç« æ—¶å¯ä»¥ç›´æ¥è°ƒç”¨ï¼Œèƒ½å¤Ÿæ–¹ä¾¿ä¸å°‘ã€‚

## æ­¥éª¤äºŒï¼šå®‰è£…è¯­é›€æ’ä»¶è¿›è¡Œæœ¬åœ°è°ƒè¯•

ä¸ºäº†ç¡®ä¿åœ¨äº‘ç«¯èƒ½å¤Ÿæ­£å¸¸ç”Ÿæˆåšå®¢ï¼Œéœ€è¦é¦–å…ˆåœ¨æœ¬åœ°è¿›è¡Œè°ƒè¯•ã€‚

### è¯­é›€æ’ä»¶çš„å®‰è£…

é¦–å…ˆåœ¨æ ¹ç›®å½•æ‰“å¼€ç»ˆç«¯å®‰è£… yuque-hexoã€‚

```powershell
npm i -g yuque-hexo
```

### ä¿®æ”¹ package.json

åœ¨ç¬¬ä¸€ä¸ªå¯¹è±¡ä»£ç å—åå¢åŠ â€yuqueConfigâ€ ä»£ç å—ã€‚

```json
{
  "name": "hexo-site",
  "version": "0.0.0",
  "private": true,
  "scripts": {
    "build": "hexo generate",
    "clean": "hexo clean",
    "deploy": "hexo deploy",
    "server": "hexo server"
},
  "yuqueConfig": {
    "postPath": "source/_posts",
    "cachePath": "yuque.json",
    "mdNameFormat": "slug",
    "adapter": "markdown",
    "concurrency": 5,
    "baseUrl": "https://www.yuque.com/api/v2",
    "login": "bingkanuo",
    "repo": "sffipz",
    "token": "***********************",
    "onlyPublished": true,
    "onlyPublic": true
  },
```

å…¶ä¸­éœ€è¦ä¿®æ”¹â€loginâ€ã€â€repoâ€ã€â€tokenâ€ å­—æ®µã€‚

- ç‚¹å‡»è¿›å…¥åšå®¢çš„çŸ¥è¯†åº“ï¼Œåœ¨æµè§ˆå™¨åœ°å€æ ä¸­å°†ç”¨æˆ·åå’Œä»“åº“åå¤åˆ¶åˆ†åˆ«ç²˜è´´ä¸ºâ€loginâ€ã€â€repoâ€ çš„å­—æ®µã€‚

![image.png](https://cdn.nlark.com/yuque/0/2020/png/8391485/1608133592273-04a6a15f-6c75-44d0-ab1c-7ca737c42d07.png#align=left&display=inline&height=251&margin=%5Bobject%20Object%5D&name=image.png&originHeight=251&originWidth=598&size=23393&status=done&style=none&width=598#crop=0&crop=0&crop=1&crop=1&id=M8WUe&originHeight=251&originWidth=598&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

- token æ˜¯åœ¨å³ä¸Šè§’å¤´åƒ -> è´¦æˆ·è®¾ç½® -> Token æ·»åŠ çš„ï¼Œæƒé™çš„è¯åªç»™è¯»å–å°±å¯ä»¥ã€‚å¤åˆ¶ç²˜è´´è·å–çš„â€tokenâ€ å­—æ®µã€‚

![image.png](https://cdn.nlark.com/yuque/0/2020/png/8391485/1608133711645-569d4bb4-3de1-450b-80b6-5cf1ca7060b0.png#align=left&display=inline&height=789&margin=%5Bobject%20Object%5D&name=image.png&originHeight=789&originWidth=1279&size=176577&status=done&style=none&width=1279#crop=0&crop=0&crop=1&crop=1&id=NGw6W&originHeight=789&originWidth=1279&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

ä¿®æ”¹ Â â€œscriptsâ€ å¢åŠ â€syncâ€: â€œyuque-hexo syncâ€ å’Œ Â â€œclean:yuqueâ€: â€œyuque-hexo cleanâ€ã€‚

```json
{
  "name": "hexo-site",
  "version": "0.0.0",
  "private": true,
  "scripts": {
    "build": "hexo generate",
    "clean": "hexo clean",
    "deploy": "hexo deploy",
    "server": "hexo server",
    "sync": "yuque-hexo sync",
    "clean:yuque": "yuque-hexo clean"
  },
  "yuqueConfig": {
    "postPath": "source/_posts",
    "cachePath": "yuque.json",
    "mdNameFormat": "slug",
    "adapter": "markdown",
    "concurrency": 5,
    "baseUrl": "https://www.yuque.com/api/v2",
    "login": "bingkanuo",
    "repo": "sffipz",
    "token": "***********************",
    "onlyPublished": true,
    "onlyPublic": true
  },
  "hexo": {
    "version": "5.2.0"
  },
```

### è¿›è¡Œæœ¬åœ°è°ƒè¯•

æ·»åŠ å®Œæˆåä¿å­˜ï¼Œåœ¨æ‰§è¡Œå‘½ä»¤å‰ï¼Œè¯·å…ˆå¤‡ä»½è‡ªå·±çš„\_post æ–‡ä»¶å¤¹ï¼Œå› ä¸ºè¯­é›€çš„ä¸‹è½½æ“ä½œä¼šè¦†ç›–åŸæœ‰çš„\_post æ–‡ä»¶å¤¹ã€‚
åœ¨ç»ˆç«¯ä¸­è¾“å…¥â€˜yuque-hexo syncâ€™å°±ä¼šæŠŠè¯­é›€çš„æ–‡ç« ç»™ä¸‹è½½ä¸‹æ¥ã€‚
ç„¶åé€šè¿‡â€˜hexo g&hexo sâ€™è¿›è¡Œè°ƒè¯•ã€‚
psï¼šè¾“å…¥â€˜yuque-hexo cleanâ€™å°±ä¼šæ¸…é™¤\_post ä¸‹çš„æ‰€æœ‰æ–‡ç« ã€‚
å¦‚æœå­˜åœ¨å¤–æŒ‚æ ‡ç­¾ï¼Œè¯·ç¡®ä¿å¤–æŒ‚æ ‡ç­¾æ ¼å¼çš„ä¹¦å†™è§„èŒƒï¼Œå¦åˆ™å®¹æ˜“æŠ¥é”™ã€‚

---

## æ­¥éª¤ä¸‰ï¼šé…ç½® github action

### è¯­é›€é˜²ç›—é“¾è§£å†³æ–¹æ³•

ç©º referrer å³å¯
åœ¨ head å¼•å…¥ä»¥ä¸‹å†…å®¹

```
- <meta name="referrer" content="no-referrer">
```

{% hideToggle è€æ–¹æ³•%}

#### ä¿®æ”¹ hexo ä¸»é¢˜æ–‡ä»¶ä¸­çš„ meta

ä»¥ butterfly ä¸»é¢˜ä¸ºä¾‹ï¼Œ
æ‰“å¼€ä¸»é¢˜æ–‡ä»¶çš„ /themes/butterfly/layout/includes/head.pugã€‚
åœ¨ meta (name=â€theme-colorâ€ content=themeColor) åæ–¹æ·»åŠ  meta (name=â€referrerâ€ content=â€no-referrerâ€)ã€‚
è¯¥æ­¥éª¤æ˜¯ç¡®ä¿è¯­é›€ä¸­çš„å›¾ç‰‡å¯ä»¥æ­£å¸¸åŠ è½½ã€‚

```
meta(name="theme-color" content=themeColor)
meta(name="referrer" content="no-referrer")
```

{% endhideToggle %}

### åˆ›å»º github action è„šæœ¬

åœ¨åšå®¢æ ¹ç›®å½•ä¸‹æ–°å»º.github æ–‡ä»¶å¤¹ï¼ˆç‚¹ä¸è¦æ¼æ‰äº†ï¼‰ï¼Œåœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹æ–°å»º workflows æ–‡ä»¶å¤¹ã€‚

![image.png](https://cdn.nlark.com/yuque/0/2020/png/8391485/1608135890427-0dc37d9e-8eed-4581-8570-e806b5e4fa1a.png#align=left&display=inline&height=65&margin=%5Bobject%20Object%5D&name=image.png&originHeight=65&originWidth=349&size=4021&status=done&style=none&width=349#crop=0&crop=0&crop=1&crop=1&id=v0z8d&originHeight=65&originWidth=349&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=)

åœ¨ workflows æ–‡ä»¶å¤¹ä¸‹æ–°å»º autodeploy.ymlã€‚å¹¶å¡«å…¥ä»¥ä¸‹ä»£ç ã€‚
å°†**ã€æ›´æ–° è¯­é›€æ‹‰å–ç¼“å­˜åŠæ–‡ç« ã€‘** ä¸**ã€éƒ¨ç½²ã€‘** Â user.name å’Œ user.email åé¢çš„ â€œâ€ ä¿¡æ¯ä¿®æ”¹ä¸ºè‡ªå·±çš„ä¿¡æ¯ï¼Œæ³¨æ„å¯¹é½ã€‚

> ç”±äºå†°è€å¸ˆçš„ workflows çš„åˆ¤å®šæ–¹å¼ä¸ºä»»ä½•ä¿®æ”¹éƒ½å¯ä»¥è§¦å‘ï¼Œå¯æœ‰æ—¶ä¼šå› ä¸ºæ²¡æœ‰æ›´æ”¹æ–‡ç« å†…å®¹è€Œè§¦å‘ action å¯¼è‡´æ²¡æœ‰æ‹‰å»åˆ°ä»»ä½•å†…å®¹è€ŒæŠ¥é”™ï¼Œè¿™é‡Œæˆ‘é‡æ„äº†ä¸€ä¸‹åˆ¤æ–­æ–¹å¼

![Screenshot_20220924_233608.jpg](https://cdn.nlark.com/yuque/0/2022/jpeg/22578074/1664033876947-c0a1c08c-9178-435a-821a-e2b76edaae93.jpeg#clientId=u23c2e94e-4b01-4&crop=0&crop=0&crop=1&crop=1&errorMessage=unknown%20error&from=ui&id=u862bb93a&name=Screenshot_20220924_233608.jpg&originHeight=1180&originWidth=1080&originalType=binary&ratio=1&rotation=0&showTitle=false&size=128329&status=error&style=none&taskId=u16adc1c3-0317-4231-86d4-671478425a9&title=)
ä½¿ç”¨æ–°æ–¹æ³•å‰ææ˜¯å·²ç»éƒ¨ç½²å¥½ Github action è‡ªåŠ¨éƒ¨ç½²

<a href="https://xlenco.eu.org/posts/77e3.html" target="cardlink">ç‚¹å‡»æŸ¥çœ‹æœ¬ç«™æ•™ç¨‹</a>

```
# è‡ªåŠ¨åŒ–åç§°
name: Deploy Yuque-Hexo Public To Pages

# å½“æœ‰è¯­é›€æ¨é€æ—¶è§¦å‘action
on:
  repository_dispatch:
  workflow_dispatch:
  push:
    branches: main
    paths:
      -'source/_posts/*'  # åªä¼šåœ¨_postsæ›´æ”¹æ—¶è§¦å‘

# è®¾ç½®ç¯å¢ƒ
jobs:
  build:
    runs-on: ubuntu-latest
    env:
      TZ: Asia/Shanghai
      YUQUE_TOKEN: ${{ secrets.YUQUE_TOKEN }}

    steps:
      # check it to your workflow can access it
      # from: https://github.com/actions/checkout
      - name: Checkout Repository master branch
        uses: actions/checkout@master

      # from: https://github.com/actions/setup-node
      - name: Setup Node.js 16.x
        uses: actions/setup-node@master
        with:
          node-version: "16.x"

      - name: å®‰è£…Hexo
        run: |
          npm install hexo-cli -g
         # npm install gulp-cli -g
          npm install yuque-hexo -g
          yuque-hexo clean
          yuque-hexo sync


      - name: è®¾ç½®Gitä¿¡æ¯
        run: |
          git config --global user.name 'xlenco'
          git config --global user.email '1043865083@qq.com'

      - name: æ›´æ–° è¯­é›€æ‹‰å–ç¼“å­˜åŠæ–‡ç«  #æ›´æ–°yuque æ‹‰å–çš„æ–‡ç« åˆ°GitHubä»“åº“
        run: |
          echo `date +"%Y-%m-%d %H:%M:%S"` begin > time.log
          git config --global user.email "1043865083@qq.com"
          git config --global user.name "xlenco"
          git add .
          git commit -m "Refresh yuque json" -a
      - name: æ¨é€ è¯­é›€æ‹‰å–ç¼“å­˜åŠæ–‡ç«  #æ¨é€ä¿®æ”¹åçš„yuque json
        uses: ad-m/github-push-action@master
        with:
          github_token: ${{ secrets.GITHUBTOKEN }}

      - name: ç¼“å­˜ Hexo
        uses: actions/cache@v3
        id: cache
        with:
          path: node_modules
          key: ${{runner.OS}}-${{hashFiles('**/package-lock.json')}}
```

{% hideToggle è€æ–¹æ³•%}

```yaml
name: è‡ªåŠ¨éƒ¨ç½²

# å½“æœ‰æ”¹åŠ¨æ¨é€å’Œè¯­é›€å‘å¸ƒæ—¶ï¼Œå¯åŠ¨Action
on: [push, repository_dispatch]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: æ£€æŸ¥åˆ†æ”¯
        uses: actions/checkout@v2
        with:
          ref: master

      #2020å¹´10æœˆågithubæ–°å»ºä»“åº“é»˜è®¤åˆ†æ”¯æ”¹ä¸ºmainï¼Œæ³¨æ„æ›´æ”¹
      #ä½†ç§æœ‰ä»“åº“è²Œä¼¼è¿˜æ˜¯masterå¹¶æ²¡æœ‰å˜

      - name: å®‰è£… Node
        uses: actions/setup-node@v1
        with:
          node-version: "12.x"

      - name: å®‰è£… Hexo
        run: |
          export TZ='Asia/Shanghai'
          npm install hexo-cli -g
          #npm install gulp-cli -g
          #å¦‚æœä½ æœ‰ä½¿ç”¨gulpçš„è¯ï¼Œæ‰“å¼€ä¸Šé¢è¿™ä¸€è¡Œ
          npm install yuque-hexo -g
          yuque-hexo clean
          yuque-hexo sync

      - name: æ›´æ–° è¯­é›€æ‹‰å–ç¼“å­˜åŠæ–‡ç«  #æ›´æ–°yuque æ‹‰å–çš„æ–‡ç« åˆ°GitHubä»“åº“
        run: |
          echo `date +"%Y-%m-%d %H:%M:%S"` begin > time.log
          git config --global user.email "499984532@qq.com"
          git config --global user.name "Zfour"
          git add .
          git commit -m "Refresh yuque json" -a

      - name: æ¨é€ è¯­é›€æ‹‰å–ç¼“å­˜åŠæ–‡ç«  #æ¨é€ä¿®æ”¹åçš„yuque json
        uses: ad-m/github-push-action@master
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}

      - name: ç¼“å­˜ Hexo
        uses: actions/cache@v1
        id: cache
        with:
          path: node_modules
          key: ${{runner.OS}}-${{hashFiles('**/package-lock.json')}}

      - name: å®‰è£…ä¾èµ–
        if: steps.cache.outputs.cache-hit != 'true'
        run: |
          npm install --save

      - name: ç”Ÿæˆé™æ€æ–‡ä»¶
        run: |
          hexo clean
          hexo g
          #gulp
          #å¦‚æœä½ æœ‰ä½¿ç”¨gulpçš„è¯ï¼Œæ‰“å¼€ä¸Šé¢è¿™ä¸€è¡Œ

      - name: éƒ¨ç½²
        run: |
          git config --global user.name "Zfour"
          git config --global user.email "499984532@qq.com"
          hexo deploy
```

{% endhideToggle %}

### ä¸Šä¼ åšå®¢æºç 

æ‰“å¼€ç»ˆç«¯è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œä¸Šä¼ ä½ çš„åšå®¢æºç åˆ°ç§æœ‰æºç ä»“åº“ã€‚

```powershell
git init
git add .
git commit -m "first commit"
git remote add origin https://github.com/ä½ çš„ç”¨æˆ·å/ä½ çš„ç§æœ‰åšå®¢æºç ä»“åº“å.git
git push -u origin master
```

### è¿›è¡Œäº‘ç«¯è°ƒè¯•

ä¸Šä¼ åä½ ä¼šå‘ç° github action ç”Ÿæ•ˆã€‚ç­‰å¾…å‡ åˆ†é’Ÿåï¼Œå¦‚æœæ‰“å‹¾ï¼Œå°±è¯´æ˜éƒ¨ç½²æˆåŠŸã€‚å¦‚æœæœªæ‰“å‹¾è¯·æ£€æŸ¥å‡ºé”™çš„æ­¥éª¤ã€‚

![IMG_20221024_103507.png](https://cdn.nlark.com/yuque/0/2022/png/22578074/1666578950937-094ff8e3-bc90-4020-8939-d128e5ec00d0.png#clientId=u8fd55d1e-1ea9-4&crop=0&crop=0&crop=1&crop=1&from=ui&id=u9cf82fde&name=IMG_20221024_103507.png&originHeight=373&originWidth=1247&originalType=binary&ratio=1&rotation=0&showTitle=false&size=73552&status=done&style=none&taskId=u87fe57a4-733e-4622-92ce-ccfbd7c70d9&title=)

---

> time.log æ–‡ä»¶æœ€è¿‘ä¼¼ä¹ä¸ä¼šè‡ªåŠ¨ç”Ÿæˆï¼Œæ‰€æœ‰å¦‚æœ action ä¸æˆåŠŸï¼Œè¯·æ‰‹åŠ¨åœ¨ä»“åº“é‡Œæ–°å»º time.log

## æ­¥éª¤å››ï¼šé…ç½®äº‘å‡½æ•°

[![Vercel](https://vercel.com/button)](https://vercel.com/new/clone?repository-url=https%3A%2F%2Fgithub.com%2Fwalinejs%2Fwaline%2Ftree%2Fmain%2Fexample)

ä¸ºäº†æ–¹ä¾¿å¤§å®¶è°ƒç”¨ï¼Œå†°è€å¸ˆç”¨ python å†™äº†ä¸€ä¸ª apiã€‚
æ›´æ¢ä¸ºä½ çš„ app åº”ç”¨é“¾æ¥ã€‚
ä½ éœ€è¦ä¼ é€’çš„å‚æ•°æœ‰ tokenï¼Œuserï¼Œsourceã€‚

```
https://yuque-vercel-webhook-api.vercel.app/api?
token='{å¡«å†™ä½ çš„githubç§é’¥}'&
user='{å¡«å†™ä½ çš„githubç”¨æˆ·å}'&
source='{å¡«å†™ä½ çš„githubä»“åº“åœ°å€}'

ç¤ºä¾‹ï¼š
https://yuque-vercel-webhook-api.vercel.app/api?token='8888888888'&user='Zfour'&source='my-blog-source-file'
å°†è¿™ä¸ªURLè·¯å¾„ä½œä¸ºè§¦å‘é“¾æ¥ï¼Œåœ¨è¯­é›€ä¸­è¿›è¡Œé…ç½®ã€‚
```

ä¿®æ”¹è§¦å‘é“¾æ¥é‡Œçš„å‚æ•°é¡¹ï¼Œè®¿é—®è¿™ä¸ªé“¾æ¥ï¼Œå¦‚æœå‡ºç°â€˜Thisâ€™s OK!â€™è¯´æ˜é…ç½®æˆåŠŸã€‚
å¤åˆ¶ URL è·¯å¾„ä½œä¸ºè§¦å‘é“¾æ¥ï¼Œåœ¨è¯­é›€ä¸­è¿›è¡Œé…ç½®ã€‚å¦‚æœä½ ä¸æƒ³éƒ¨ç½²å¯ä»¥ç”¨åšä¸»éƒ¨ç½²å¥½çš„
https://yuque.xlenco.eu.org

> æŒ‰ç…§ä¸Šæ–¹é…ç½®ä¸€ä¸‹å°±å¯ä»¥ç”¨äº†

## æ­¥éª¤äº”ï¼šé…ç½®è¯­é›€çš„ webhook

### è®¾å®šè§¦å‘è§„åˆ™

åœ¨çŸ¥è¯†åº“ä¸­é€‰æ‹©è®¾ç½®ã€‚
![Screenshot_20220924_232506.jpg](https://cdn.nlark.com/yuque/0/2022/jpeg/22578074/1664033119560-4d875c3e-d13f-49cc-ad88-53e3cca4a081.jpeg#clientId=ubd0b29db-a8e1-4&crop=0&crop=0&crop=1&crop=1&errorMessage=unknown%20error&from=ui&id=u2f7e5e8c&name=Screenshot_20220924_232506.jpg&originHeight=1099&originWidth=1080&originalType=binary&ratio=1&rotation=0&showTitle=false&size=108673&status=error&style=none&taskId=u03f02684-d952-42fe-b15d-c5f621a5cd6&title=)
è®¾å®šè§¦å‘è§„åˆ™ã€‚ç²˜è´´åœ¨äº‘å‡½æ•°å¤„è·å–çš„è®¿é—®è·¯å¾„ï¼ˆURL é“¾æ¥ï¼‰ã€‚

è®¾ç½®å®Œæ¯•åï¼Œä½ å¯ä»¥å°è¯•å‘å¸ƒä¸€ç¯‡æ–‡ç« è¿›è¡Œæµ‹è¯•ã€‚å¦‚æœ github action æ‰§è¡Œåˆ™è¯´æ˜é…ç½®æˆåŠŸã€‚

---

## åè®°

æœ‰é—®é¢˜è¯·åœ¨ä¸‹æ–¹è¯„è®ºã€‚
